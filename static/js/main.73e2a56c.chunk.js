(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{13:function(e,t,a){e.exports={galleryItem:"ImageGalleryItem_galleryItem__BPw5r",imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2Fs4f"}},14:function(e,t,a){e.exports={overlay:"Modal_overlay__1VUpz",modal:"Modal_modal__25-Y7"}},18:function(e,t,a){e.exports={button:"Button_button__5CS-w"}},19:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__NKJJB"}},28:function(e,t,a){},29:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(6),o=a.n(r),i=(a(28),a(16)),s=a(9),l=(a(29),a(17)),u=a.n(l),b=a(5),h=(a(50),a(18)),j=a.n(h),f=a(2),m=function(e){var t=e.loadMoreBtn;return Object(f.jsx)("button",{type:"button",className:j.a.button,onClick:t,children:"Load more"})},O=a(13),d=a.n(O),p=function(e){var t=e.imageItem,a=e.onItemClick;return Object(f.jsx)("li",{className:d.a.galleryItem,onClick:function(){a(t)},children:Object(f.jsx)("img",{src:t.webformatURL,alt:t.tags,className:d.a.imageGalleryItem})})},g=a(19),y=a.n(g),_=function(e){var t=e.images,a=e.showModal,n=function(e){a(e)};return Object(f.jsx)("ul",{className:y.a.imageGallery,children:t.map((function(e){return Object(f.jsx)(p,{imageItem:e,onItemClick:n},e.id)}))})},x=a(14),v=a.n(x),w=document.getElementById("modal-root"),I=function(e){var t=e.closeModal,a=e.children,c=Object(n.useCallback)((function(e){"Escape"===e.key&&(console.log("Escape pressed"),t())}),[t]);return Object(n.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}),[c]),Object(r.createPortal)(Object(f.jsx)("div",{className:v.a.overlay,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(f.jsx)("div",{className:v.a.modal,children:a})}),w)},S=a(7),k=a.n(S),N=a(20),B=a(0),E=function(e){var t=e.onSubmit;return Object(f.jsx)("header",{className:k.a.searchbar,children:Object(f.jsxs)("form",{className:k.a.form,onSubmit:function(e){e.preventDefault();var a=e.target.query.value;t(a)},children:[Object(f.jsx)("button",{type:"submit",className:k.a.formBtn,children:Object(f.jsx)(B.b.Provider,{value:{className:"".concat(k.a.searchIcon)},children:Object(f.jsx)(N.a,{})})}),Object(f.jsx)("input",{className:k.a.formInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"query"})]})})},P=a(15),C=a.n(P),G=a(21),M=a(22),L=a(23),q=a(4),F=a(8),J=Object(F.a)("baseUrl"),T=Object(F.a)("privatKey"),U=Object(F.a)("options"),z=Object(F.a)("page"),D=Object(F.a)("perPage"),Q=function(){function e(){Object(M.a)(this,e),Object.defineProperty(this,J,{writable:!0,value:"https://pixabay.com/api/"}),Object.defineProperty(this,T,{writable:!0,value:"24000530-001c810234599b9b4d7fbf89c"}),Object.defineProperty(this,U,{writable:!0,value:{imageType:"photo",orientation:"horizontal",safesearch:!0}}),Object.defineProperty(this,z,{writable:!0,value:1}),Object.defineProperty(this,D,{writable:!0,value:12}),this.searchQuery=""}return Object(L.a)(e,[{key:"fetchSearch",value:function(){var e=Object(G.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Object(q.a)(this,J)[J],"?key=").concat(Object(q.a)(this,T)[T],"&q=").concat(this.searchQuery,"&image_type=").concat(Object(q.a)(this,U)[U].imageType,"&orientation=").concat(Object(q.a)(this,U)[U].orientation,"&safesearch=").concat(Object(q.a)(this,U)[U].safesearch,"&page=").concat(Object(q.a)(this,z)[z],"&per_page=").concat(Object(q.a)(this,D)[D]));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,Object(q.a)(this,z)[z]+=1,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetPage",value:function(){Object(q.a)(this,z)[z]=1}}]),e}(),K=new Q,R=function(){var e=Object(n.useState)(1),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),o=Object(s.a)(r,2),l=o[0],h=o[1],j=Object(n.useState)([]),O=Object(s.a)(j,2),d=O[0],p=O[1],g=Object(n.useState)(null),y=Object(s.a)(g,2),x=y[0],v=y[1],w=Object(n.useState)(!1),S=Object(s.a)(w,2),k=S[0],N=S[1];return Object(n.useEffect)((function(){l&&(K.searchQuery=l,K.resetPage(),N(!0),K.fetchSearch().then((function(e){0===e.hits.length&&b.b.error("No images with this query!"),p(e.hits)})).catch((function(e){return b.b.error(e.code)})).finally((function(){N(!1)})))}),[l]),Object(n.useEffect)((function(){1!==a&&(N(!0),K.fetchSearch().then((function(e){0===e.hits.length&&b.b.error("No more images!"),p((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.hits))}))})).catch((function(e){return b.b.error(e.code)})).finally((function(){N(!1)})))}),[a]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E,{onSubmit:function(e){if(!e)return b.b.warn("Enter some query!"),void p([]);c(1),h(e)}}),Object(f.jsx)(_,{images:d,showModal:function(e){v(e)}}),k&&Object(f.jsx)(u.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,style:{textAlign:"center"}}),d.length>0&&Object(f.jsx)(m,{loadMoreBtn:function(){c((function(e){return e+1}))}}),x&&Object(f.jsx)(I,{closeModal:function(){v(null)},children:Object(f.jsx)("img",{src:x.largeImageURL,alt:x.tags})}),Object(f.jsx)(b.a,{position:"top-right",autoClose:3e3})]})};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(R,{})}),document.getElementById("root"))},7:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__25NTP",form:"Searchbar_form__1J4_v",formBtn:"Searchbar_formBtn__2uq8D",searchIcon:"Searchbar_searchIcon__1zEml",formBtnLabel:"Searchbar_formBtnLabel__LEwWU",formInput:"Searchbar_formInput__1XEJg"}}},[[53,1,2]]]);
//# sourceMappingURL=main.73e2a56c.chunk.js.map